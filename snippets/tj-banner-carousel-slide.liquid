{% liquid  

    assign overlay_string = ''

    if block.settings.image_overlay_opacity == 0
            assign overlay_string = '0'
        elsif block.settings.image_overlay_opacity == 100
            assign overlay_string = '1'
        else 
            assign percent = block.settings.image_overlay_opacity | divided_by: 10
            assign overlay_string = '0.' | append: percent
    endif 

-%}

{% style %}

    [data-section-id="{{ section.id }}"] [data-block-id="{{ block.id }}"] {
        position: relative;
    }

    [data-section-id="{{ section.id }}"] [data-block-id="{{ block.id }}"] .button {
        background-color: {{ block.settings.button_background_color }}; 
        color: {{ block.settings.button_text_color }};
    }

    [data-section-id="{{ section.id }}"] [data-block-id="{{ block.id }}"] .tj-banner-carousel-slide h1,
    [data-section-id="{{ section.id }}"] [data-block-id="{{ block.id }}"] .tj-banner-carousel-slide h2,
    [data-section-id="{{ section.id }}"] [data-block-id="{{ block.id }}"] .tj-banner-carousel-slide h3,
    [data-section-id="{{ section.id }}"] [data-block-id="{{ block.id }}"] .tj-banner-carousel-slide h4, 
    [data-section-id="{{ section.id }}"] [data-block-id="{{ block.id }}"] .tj-banner-carousel-slide h5,
    [data-section-id="{{ section.id }}"] [data-block-id="{{ block.id }}"] .tj-banner-carousel-slide p  {
        color: {{ block.settings.text_color }};
    }

    {% if block.settings.mobile_image %}
        [data-section-id="{{ block.id }}"] .tj-banner-carousel-slide img.mobile {
            display: none;
        }
        @media screen and (max-width: 768px) {
            [data-section-id="{{ section.id }}"] .tj-banner-carousel-slide img.desktop  {
                display: none;
            }
            [data-section-id="{{ section.id }}"] .tj-banner-carousel-slide img.mobile {
                display: block;
            }
        }
    {% endif %}

{% endstyle %}

{% if block.settings.use_slide_linkout %}
    <a href="{{ section.settings.link_out }}" class="tj-banner-carousel-slide">
{% else %}
    <div class="tj-banner-carousel-slide">
{% endif %}

    <div class="text-container">
        {% if block.settings.header %}
            {% if block.settings.use_h1 %}
                <h1>{{ block.settings.header }}</h1>
                {% else %}
                <h2>{{ block.settings.header }}</h2>
            {% endif %}
        {% endif %}

        {% if block.settings.subheader %}
            <h3>{{ block.settings.subheader }}</h3>
        {% endif %}

        {% if block.settings.description != blank %}
            <p>{{ block.settings.description }}</p>
        {% endif %}

        {% if block.settings.button_link %}
            <a class="button button--primary" href="{{ block.settings.button_link }}">{{ block.settings.button_text }}</a>
        {% endif %}
    </div>

    <img 
        class="desktop"
        srcset="
            {%- if block.settings.desktop_image.width >= 750 -%}{{ block.settings.desktop_image | image_url: width: 750 }} 750w,{%- endif -%}
            {%- if block.settings.desktop_image.width >= 1100 -%}{{ block.settings.desktop_image | image_url: width: 1100 }} 1100w,{%- endif -%}
            {%- if block.settings.desktop_image.width >= 1500 -%}{{ block.settings.desktop_image | image_url: width: 1500 }} 1500w,{%- endif -%}"
        loading="lazy"
        alt="{{ block.settings.image_alt_text | escape }}"
        width="{{ block.settings.desktop_image.width }}"
        height="{{ block.settings.desktop_image.width | divided_by: block.settings.desktop_image.aspect_ratio }}"
    >

    {% if block.settings.mobile_image %}
        <img 
            class="mobile"
            srcset="
                {%- if block.settings.mobile_image.width >= 375 -%}{{ block.settings.mobile_image | image_url: width: 375 }} 375w,{%- endif -%}
                {%- if block.settings.mobile_image.width >= 750 -%}{{ block.settings.mobile_image | image_url: width: 750 }} 750w,{%- endif -%}"
            loading="lazy"
            alt="{{ block.settings.image_alt_text | escape }}"
            width="{{ block.settings.mobile_image.width }}"
            height="{{ block.settings.mobile_image.width | divided_by: block.settings.mobile_image.aspect_ratio }}"
        >
    {% endif %}

    {% unless overlay_string == '0' %}
        <div class="image-overlay" style="background-color: rgba(0, 0, 0, {{ overlay_string }});"></div>
    {% endunless %}

{% if block.settings.use_slide_linkout %}
    </a>
{% else %}
    </div>
{% endif %}
